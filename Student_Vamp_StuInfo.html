<html lang="en">
  <head>
    <title>Vampire?</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.charts.setOnLoadCallback(drawChart);
        

        function drawChart() {
            var data = new google.visualization.DataTable();
            var modelOption = document.getElementById('mySelect').value;
            
            classmate_data_processing(document.getElementById('user_table'), data, modelOption);

            var options = {'title':'How many vampires in the class?',
                        'width':400,
                        'height':300};
            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }


    // model of MVC
    
    function classmate_data_processing(table_data, result_data, modelOption){
    // this function processes classmate data and creates data table
    var num_human = 0;
    var num_vampire = 0;
    console.log(modelOption);

    if (modelOption == 1){
        // iterate over each row in the table
        for (var i = 0; i < table_data.rows.length; i++) {
            var is_vampire = Math.random() < 0.5; // randomly determine if user is a vampire

            // update the number of humans and vampires based on the result
            if (is_vampire) {
                num_vampire++;
            } else {
                num_human++;
            }


        }
        result_data.addColumn('string', 'Element');
            result_data.addColumn('number', 'Count');
            result_data.addRows([     
                ['Human', num_human],
                ['Vampire', num_vampire]
            ]);
            console.log(result_data);

    } 


    
    // update the chart title to reflect the number of vampires and humans
    var chart_title = 'Class makeup: ' + num_human + ' humans and ' + num_vampire + ' vampires';
    result_data.setTableProperty('title', chart_title);
}
        








        function insert_user_info() {
            // Get form data
            var first_name = document.getElementById('first_name').value;
            var garlic_checkbox = document.getElementById('garlic_checkbox').checked;
            var shadow_checkbox = document.getElementById('shadow_checkbox').checked;
            var accent_checkbox = document.getElementById('accent_checkbox').checked;
            var complexion_checkbox = document.getElementById('complexion_checkbox').checked;
            
            // Create new table row
            var row = document.createElement('tr');
            
            // Add columns to row
            var name_col = document.createElement('td');
            name_col.textContent = first_name;
            row.appendChild(name_col);
            
            var garlic_col = document.createElement('td');
            garlic_col.textContent = garlic_checkbox ? "Yes" : "No";
            row.appendChild(garlic_col);
            
            var shadow_col = document.createElement('td');
            shadow_col.textContent = shadow_checkbox ? "Yes" : "No";
            row.appendChild(shadow_col);
            
            var accent_col = document.createElement('td');
            accent_col.textContent = accent_checkbox ? "Yes" : "No";
            row.appendChild(accent_col);
            
            var complexion_col = document.createElement('td');
            complexion_col.textContent = complexion_checkbox ? "Yes" : "No";
            row.appendChild(complexion_col);
            
            // Add row to table
            var table = document.getElementById('user_table');
            table.appendChild(row);

            drawChart();
        }

    </script>
  </head>
  <body>
    <div class="container">
      <h1 class="display-1">Human or Vampire?</h1>
      <form>
        <h3 class="text-muted">Input a new user below.</h3>
        <hr>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="first_name">First Name</label>
            <input type="text" class="form-control" id="first_name" placeholder="First Name">
          </div>
          <div class="form-group col-md-3">
            <div class="checkbox">
              <label><input type="checkbox" id="garlic_checkbox">Garlic</label>
            </div>
            <div class="checkbox">
              <label><input type="checkbox" id="shadow_checkbox">Shadow</label>
            </div>
          </div>
          <div class="form-group col-md-3">
            <div class="checkbox">
              <label><input type="checkbox" id="accent_checkbox">Accent</label>
            </div>
            <div class="checkbox">
              <label><input type="checkbox" id="complexion_checkbox">Compexion of a Vampire</label>
            </div>
          </div>
        </div>
      </form>
  
      <button class="btn btn-primary col-md-6" onclick="insert_user_info()">Add User</button>
      <hr>
  
      <table class="table">
        <thead>
          <tr>
            <th>First Name</th>
            <th>Garlic</th>
            <th>Shadow</th>
            <th>Accent</th>
            <th>Compexion of a Vampire</th>
          </tr>
        </thead>
        <tbody id="user_table">
            <tr>
                <td>John</td>
                <td>No</td>
                <td>No</td>
                <td>No</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>Lee</td>
                <td>Yes</td>
                <td>No</td>
                <td>No</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>Emma</td>
                <td>No</td>
                <td>Yes</td>
                <td>No</td>
                <td>No</td>
            </tr>
            <tr>
                <td>Ava</td>
                <td>Yes</td>
                <td>Yes</td>
                <td>No</td>
                <td>No</td>
            </tr>
            <tr>
                <td>Alex</td>
                <td>No</td>
                <td>No</td>
                <td>No</td>
                <td>No</td>
            </tr>
        </tbody>
      </table>
      <div class="form-group">
        <label for="mySelect">Select Model Logic:</label>
        <select class="form-control" id="mySelect" onchange="drawChart()">
        <option value='1'>Random Guess</option>
        <option value='2'>Threshold Based Method</option>
        <option value='3'>Decision Tree</option>
        <option value='4'>Neural Network</option>
        </select>
      </div>
      <div class="container">
      <div id="chart_div"></div>
    </div>

    </div>
   <button onclick="window.location.href = 'Student_Vamp_Results.html';">Random Generation</button>
    
</body>
</html>    
